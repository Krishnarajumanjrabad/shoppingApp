<!--
  Generated template for the ProductPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>product</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding>

  <div [formGroup]="productForm" danger>
    <ion-grid>
      <ion-row>
        <ion-col>
          <ion-item>
            <ion-label stacked><span class="input-label"> Catalog ID</span></ion-label>
            <ion-select formControlName="catalogId">
              <ion-option *ngFor="let catalog of catalogList | async"
                          [value]="catalog.catalogId">
                {{catalog.catalogDesc}}
              </ion-option>
            </ion-select>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <ion-item>
            <ion-label stacked><span class="input-label"> Category ID</span></ion-label>
            <ion-select formControlName="catagoryId">
              <ion-option *ngFor="let catagory of catagoryList | async"
                          [value]="catagory.catagoryId">
                {{catagory.catagoryDesc}}
              </ion-option>
            </ion-select>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <ion-item>
            <ion-label stacked><span class="input-label"> Category ID</span></ion-label>
            <ion-select formControlName="subCatagoryId">
              <ion-option *ngFor="let subCatagory of subCatagoryList | async"
                          [value]="subCatagory.subCatagoryId">
                {{subCatagory.subCatagoryDesc}}
              </ion-option>
            </ion-select>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <ion-item>
            <ion-label stacked><span class="input-label">Product ID</span></ion-label>
            <ion-input type="text" value="" formControlName="productId"
                       placeholder="productId" value=""></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <ion-item>
            <ion-label stacked><span class="input-label">Product Description</span>
            </ion-label>
            <ion-input type="text" value="" formControlName="productDesc"
                       placeholder="productDesc"
                       value=""></ion-input>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <ion-item>
            <ion-label stacked><span class="input-label"> Product Type</span></ion-label>
            <ion-select formControlName="productType">
              <ion-option *ngFor="let productType of productTypes" [value]="productType">
                {{productType}}
              </ion-option>
            </ion-select>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col>
          <ion-item>
            <ion-label stacked><span class="input-label"> Direction</span></ion-label>
            <ion-textarea formControlName="direction" placeholder="direction"
                          value=""></ion-textarea>
          </ion-item>
        </ion-col>
      </ion-row>


      <div [formGroup]="surveyForm">

        <ion-row>
          <ion-col>
            <ion-item>
              <ion-label stacked><span class="input-label"> Units </span></ion-label>
              <ion-input type="text" value="" formControlName="unit" placeholder="unit"
                         value=""></ion-input>
            </ion-item>
          </ion-col>
          <ion-col>
            <ion-item>
              <ion-label stacked><span class="input-label"> Composition Type</span>
              </ion-label>
              <ion-select formControlName="compositionType">
                <ion-option *ngFor="let compositionType of productCompositions"
                            [value]="compositionType">
                  {{compositionType}}
                </ion-option>
              </ion-select>
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col>
            <ion-item>
              <ion-label stacked><span class="input-label"> Price</span></ion-label>
              <ion-input type="text" formControlName="price" placeholder="price"
                         value=""></ion-input>
            </ion-item>
          </ion-col>
          <ion-col>
            <ion-item>
              <ion-label stacked><span class="input-label"> skuStock</span></ion-label>
              <ion-input type="text" formControlName="skuStock" placeholder="In Stock"
                         value=""></ion-input>
            </ion-item>
          </ion-col>
          <ion-col>
            <ion-fab center right edge>
              <button type="submit" ion-fab mini right
                      (click)="addItemToProductSpecificInfos(surveyForm.value)">
                <ion-icon name="add"></ion-icon>
              </button>
            </ion-fab>
          </ion-col>

        </ion-row>

      </div>
      <div *ngIf="productSpecificsInfos.length > 0" class="row">
        <ion-grid>
          <ion-row>
            <ion-col col-md-3><strong>Unit</strong></ion-col>
            <ion-col col-md-3><strong>CompositionType</strong></ion-col>
            <ion-col col-md-3><strong>Price</strong></ion-col>
            <ion-col col-md-3><strong>In Stock</strong></ion-col>
            <ion-col col-md-3><strong>Action </strong></ion-col>
          </ion-row>
          <ion-row
            *ngFor="let productSpecificInfo of productSpecificsInfos; let i=index; ">
            <ion-col col-md-3>{{productSpecificInfo.unit}}</ion-col>
            <ion-col col-md-3>{{productSpecificInfo.compositionType}}</ion-col>
            <ion-col col-md-3>{{productSpecificInfo.price | currency:'INR':true }}
            </ion-col>
            <ion-col col-md-3>{{productSpecificInfo.skuStock}}</ion-col>

            <ion-col col-md-3>
              <button ion-button small color="danger" (click)='removeItem(i)'>Remove
              </button>
            </ion-col>

          </ion-row>

        </ion-grid>
      </div>

    </ion-grid>


    <div [formGroup]="productInformationForm">

      <ion-row>
        <ion-col>
          <ion-item>
            <ion-label stacked><span class="input-label"> Ingredients </span></ion-label>
            <ion-input type="text" value="" formControlName="ingredients"
                       placeholder="unit"
                       value=""></ion-input>
          </ion-item>
        </ion-col>
        <ion-col>
          <ion-item>
            <ion-label stacked><span class="input-label"> Composition</span></ion-label>
            <ion-select formControlName="productcompositionType">
              <ion-option *ngFor="let compositionType of productCompositions"
                          [value]="compositionType">
                {{compositionType}}
              </ion-option>
            </ion-select>
          </ion-item>
        </ion-col>
        <ion-col>
          <ion-item>
            <ion-label stacked><span class="input-label"> Quantity </span></ion-label>
            <ion-input type="text" value="" formControlName="qty" placeholder="unit"
                       value=""></ion-input>
          </ion-item>
        </ion-col>
        <ion-col>
          <ion-fab center right edge>
            <button type="submit" ion-fab mini right
                    (click)="addItemToProductInformationDetails(productInformationForm.value)">
              <ion-icon name="add"></ion-icon>
            </button>
          </ion-fab>
        </ion-col>
      </ion-row>


    </div>
    <div *ngIf="productSpecificsInfos.length > 0" class="row">
      <ion-grid>
        <ion-row>
          <ion-col col-md-3><strong>ingredients</strong></ion-col>
          <ion-col col-md-3><strong>ProductCompositionType</strong></ion-col>
          <ion-col col-md-3><strong>Quantity</strong></ion-col>
          <ion-col col-md-3><strong>Action </strong></ion-col>
        </ion-row>
        <ion-row
          *ngFor="let productInformationDetail of productInformationDetailList; let i=index; ">
          <ion-col col-md-3>{{productInformationDetail.ingredients}}</ion-col>
          <ion-col col-md-3>{{productInformationDetail.productcompositionType}}</ion-col>
          <ion-col col-md-3>{{productInformationDetail.qty}}</ion-col>
          <ion-col col-md-3>
            <button ion-button small color="danger" (click)='removeItem(i)'>Remove
            </button>
          </ion-col>

        </ion-row>

      </ion-grid>
    </div>

    <div>
      <ion-label color="danger" fixed>Upload the file:</ion-label>

      <input type="file" multiple #input/>

    </div>

    <ion-grid>
      <ion-row *ngIf="photos != null" style="flex-wrap: wrap;">
        <ion-col col-6 col-md-4 *ngFor="let image of photos | async">

          <img style="height: 200px;width: 250px; align-items: left"
               [src]="image.gallary"/>

        </ion-col>

      </ion-row>
    </ion-grid>
    <ion-grid>
      <ion-row>
        <ion-col width-50>
          <button type="button" ion-button round block color="danger"
                  (click)="productSubmit(productForm.value)"
                  [disabled]="!productForm.valid"><span
            style="color: black">Send</span></button>
        </ion-col>
        <ion-col width-50>
          <button type="reset" ion-button round block color="danger" right><span
            style="color: black">Clear</span>
          </button>
        </ion-col>
      </ion-row>
    </ion-grid>

    <div *ngIf="finalProductsList" class="row">
      <h4> Displaying the Catalog information for Admin User only</h4>
      <ion-grid>
        <ion-row>
          <ion-col col-md-3><strong>Catalog Id</strong></ion-col>
          <ion-col col-md-3><strong>Catagpry Id</strong></ion-col>
          <ion-col col-md-3><strong>SubCatagory Id</strong></ion-col>
          <ion-col col-md-3><strong>product Id</strong></ion-col>
          <ion-col col-md-3><strong>Product Description </strong></ion-col>
          <ion-col col-md-3><strong>Action </strong></ion-col>
        </ion-row>
        <ion-row *ngFor="let productInfo of finalProductsList | async">

          <ion-col col-md-3>{{productInfo.catalogId}}</ion-col>
          <ion-col col-md-3>{{productInfo.catagoryId}}</ion-col>
          <ion-col col-md-3>{{productInfo.subCatagoryId}}</ion-col>
          <ion-col col-md-3>{{productInfo.productId}}</ion-col>
          <ion-col col-md-3>{{productInfo.productDesc}}</ion-col>

          <ion-col col-md-3>
            <button ion-button small color="danger"
                    (click)="productRemove(productInfo.$key)">Remove
            </button>
          </ion-col>

        </ion-row>
      </ion-grid>
    </div>

  </div>
</ion-content>
